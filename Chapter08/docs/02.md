# 2. 스프링의 목적

## 2.1 엔터프라이즈 개발의 복잡함

### 복잡함의 근본적인 이유

엔터프라이즈 시스템 개발이 복잡한 이유는 크게 두 가지로 볼 수 있다.

1. 기술적인 제약조건과 요구사항이 늘어가기 때문이다.
    - **엔터프라이즈 시스템**이란 서버에서 동작하며 기업과 조직의 업무를 처리해주는 시스템을 말한다.
    - 많은 사용자의 요청을 동시에 처리해야 하기 때문에 서버의 자원을 효율적으로 공유하고 분배해서 사용할 수 있어야 한다.
    - 또한 기업의 핵심 정보를 처리하거나 미션 크리티컬한 시스템을 다루기도 하기 때문에 보안, 안정성, 확장성 면에서도 뛰어나야 한다.
    - 따라서 엔터프라이즈 시스템을 개발하는데 기술적으로 고려할 사항이 많다.
    - 문제는 엔터프라이즈 시스템의 기술적인 요구사항은 단순히 고가의 WAS나 툴로 충족되지 않는다는 점이다.

2. 엔터프라이즈 애플리케이션이 구현해야 할 핵심기능인 비즈니스 로직의 복잡함이 증가하기 때문이다.
    - 예전엔 기업 업무 중 회계 같은 복잡한 계산이나 빠른 분석 작업이 필요한 영역에서만 IT 시스템을 활용했다.
    - 하지만 점차 대부분의 업무 처리가 컴퓨터에 의존하게 되었다.
    - 그만큼 다양하고 복잡한 업무 처리 기능을 엔터프라이즈 시스템이 구현해야 한다는 뜻이다.
    
### 복잡함을 가중시키는 원인

- 엔터프라이즈 애플리케이션 개발이 실패하는 주요 원인은 비즈니스 **로직의 복잡함과 기술적인 복잡함**이다.
- 복잡하다는 건 세부 요소가 이해하기 힘든 방식으로 얽혀 있어, 쉽게 다루기 어렵다는 의미다.
- 어려운 근본적인 이유는 **비즈니스 로직과 엔터프라이즈 기술이라는 두 가지 복잡함이 한 데 얽혀 있기 때문**이다.
- 전통적인 자바 엔터프라이즈 개발 기법은 비즈니스 로직과 기술적인 코드가 혼재될 수밖에 없는 방식이었다.


## 2.2 복잡함을 해결하려는 도전

### 제거될 수 없는 근본적인 복잡함

- 엔터프라이즈 개발의 근본적인 복잡함의 원인은 제거할 대상이 아니다.
- 대신 그 복잡함을 효과적으로 상대할 전략과 기법이 필요하다.
- 문제는 비즈니스 로직의 복잡함과 기술적인 복잡함을 효과적으로 처리하는 방법이 다르다.
- 따라서 가장 먼저 할 일은 성격이 달느 이 두 가지 복잡함을 분리하는 것이다.

### 실패한 해결책: EJB

- EJB의 기본 전략도 이 두 가지를 분리하는 것이었다. 하지만 실패했다.
- EJB는 기술적인 복잡함을 핵심 로직에서 분리하는 데 일부 성공했다.
    - 선언적 트랜잭션, 선언적 보안
    - 컨테이너를 통한 리모팅 기술의 적용
    - 컴포넌트 단위의 배치
    - JNDI를 통한 서비스 검색 지원
    - 서비스 오브젝트의 풀링
    - 컴포넌트 생명주기 관리 등
- 다만 EJB 환경에서 동작하기 위해 특정 인터페이스를 구현하고, 특정 클래스를 상속하고, 서버 종속 서비스를 통해 접근해야 사용 가능했다.
- 이는 오히려 EJB라는 환경과 스펙에 종속되는 코드로 만들어야 하는 큰 부담이었다.

### 비침투적인 방식을 통한 효과적인 해결책: 스프링

- 스프링은 EJB의 실패를 교훈 삼아 출발했다.
- EJB 같이 어떤 기술을 적용할 떄 그 기술과 관련된 코드나 규약 등이 코드에 등장하는 것을 침투적인(invasive) 기술이라 한다.
    - 이는 복잡함을 가중시키는 원인이 된다.
- 비침투적인(non-invasive) 기술은 **기술의 적용 사실이 코드에 직접 반영되지 않는다는 특징**이 있다.
    - 애플리케이션 코드 여기저기에 불쑥 등장하거나, 코드의 설계와 구현 방식을 제한하지는 않는다.
- 스프링은 비침투적인 기술이라는 전략을 택했고, 덕분에 기술적인 복잡함과 비즈니스 로직을 분리할 수 있다.


## 2.3 복잡함을 상대하는 스프링의 전략

### 기술적 복잡함을 상대하는 전략

엔터프라이즈 기술을 적용했을 때 발생하는 복잡함의 문제를 두 가지로 분류하고 각각에 적절한 대응 방법을 제공한다.

1. 기술에 대한 접근 방식이 일관성이 없고, 특정 환경에 종속적이다.
    - 서버나 환경이 변하거나, 적용되는 조건이 바뀌면 적용하는 기술이 달라지고 이에 따라 코드가 달라지는 건 심각한 문제다.
    - 이런 일관성 없는 기술과 서버환경의 변화에 대해 스프링은 **서비스 추상화**로 대응했다.
    - 기술적인 복잡함은 추상화를 통해 기술 구현 부분과 인터페이스를 분리하고, 환경과 세부 기술에 독립적인 접근 인터페이스를 제공했다.

2. 기술적인 처리를 담당하는 코드가 성격이 다른 코드에 섞여서 등장한다.
    - 비즈니스 로직 전후로 경계가 설정되는 트랜잭션, 보안 적용, 로깅, 감사 등이 대표적인 예다.
    - 이런 기술과 비즈니스 로직의 혼재로 발생하는 복잡함을 해결하기 위해 스프링은 **AOP**로 대응했다.
    - AOP는 기술을 다루는 코드로 인한 복잡함이 기술 그 자체 이상으로 불필요하게 증대되지 않도록 도와준다.

### 비즈니스와 애플리케이션 로직의 복잡함을 상대하는 전략

- 기술적인 코드, 침투적인 기술이 남긴 불필요한 흔적을 제거하면 순수하게 애플리케이션의 주요 기능과 비즈니스 로직만 독립적으로 존재하게 된다.
- 이 중 기술적인 부분과 데이터 처리 코드, 웹이나 리모트 인터페이스 코드 등을 제외하면 비즈니스 로직만 남는다.
- 비즈니스 로직을 담은 코드는 애플리케이션에서 가장 핵심이 되는 부분이다. 따라서 업무에 따라 자주 변화한다.
- 비즈니스 로직 코드에 오류가 있다면 엔터프라이즈 시스템을 사용하는 업무 자체에 큰 지장을 초래한다.
- 예전에는 비즈니스 로직을 상당 부분 DB에 두는 것이 유행이었다.
    - SQL을 통해 비즈니스 로직을 표현한다.
    - DB에서 동작하는 저장 프로시저를 통해 처리한다.
- 시스템 규모가 커지면서, 확장하기 힘들고 확장에 많은 비용이 드는 공유 자원인 DB에 부담을 주었고 유지보수와 테스트도 어려웠다.
- 따라서 시스템 개발의 흐름이 점차 비즈니스 로직을 애플리케이션 안에서 처리하도록 변화하였다.
- 비침투적 기술인 스프링은 핵심 로직을 다루는 코드에 자신을 잘 드러내지 않는다.
- 다만 뒤에서 은밀하게 비즈니스 로직을 담당하는 오브젝트에게 적절한 엔터프라이즈 기술 서비스가 제공되도록 도와준다.
- 비즈니스 로직의 복잡함을 상대하는 전략은 스**자바라는 객체지향 기술 그 자체**이며, 스프링은 **언어의 장점을 방해하는 요소를 제거**하도록 돕는다.

### 핵심 도구: 객체지향과 DI

- 기술과 비즈니스 로직의 복잡함을 해결하는 데 스프링이 사용하는 도구는 **객체지향**이다.
- 스프링의 모토는 **기본으로 돌아가자**이다.
    - 객체지향에 충실한 설계가 가능하도록 단순 오브젝트로 개발하게 하고, 
    - 객체지향의 설계 기법을 잘 적용할 수 있는 구조를 만들기 위해 
    - DI 같은 유용한 기술을 편하게 적용하도록 도와주는 것이다.
- 기술적인 복잡함을 효과적으로 다루게 해주는 기법은 모두 DI를 바탕으로 하고 있다.
- 그리고 DI는 객체지향 설계 기술 없이는 그 존재의미가 없다.
- 객체지향 언어를 쓴다고 자연스레 객체지향 프로그래밍을 할 수 있지 않다. DI가 이를 이끌어주는 좋은 동반자다.

---
[Home](./index.md)
