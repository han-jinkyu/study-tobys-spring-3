# 3. JDBC 전략 패턴의 최적화

## 3.1 전략 클래스의 추가 정보

- add()를 적용하려고 보니 user를 가져올 수가 없다.
- user는 생성자를 통해 제공 받아 본다.

```java
public class AddStatement implements StatementStrategy {
    private User user;

    public AddStatement(User user) {
        this.user = user;
    }

    @Override
    public PreparedStatement makePreparedStatement(Connection c) throws SQLException {
        PreparedStatement ps = c.prepareStatement(
                "INSERT INTO users(id, name, password) VALUES(?, ?, ?)");

        ps.setString(1, user.getId());
        ps.setString(2, user.getName());
        ps.setString(3, user.getPassword());

        return ps;
    }
}
```

```java
public abstract class UserDao {
    // ...
    public void add(User user) throws SQLException {
        AddStatement strategy = new AddStatement(user);
        jdbcContextWEithStatementStrategy(strategy);
    }
    // ...
}
```
---
[목록](./index.md)
