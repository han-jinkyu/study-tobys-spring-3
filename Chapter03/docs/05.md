# 5. 템플릿과 콜백

- 지금까지 전략 패턴을 이용해 리팩토링했다. 
- 일정한 작업 패턴을 갖는 작업 흐름이 존재하고 그 중 일부분만 자주 바꿔서 사용해야 하는 경우 적합하다.
- 스프링에서는 이를 `템플릿/콜백 패턴`이라 부른다.

## 5.1 템플릿/콜백의 동작원리

- `템플릿`은 고정된 작업 흐름을 가진 코드를 재사용한다는 의미에서 붙여졌다.
- `콜백`은 템플릿 안에서 호출되는 것을 목적으로 만들어진 오브젝트다.

### 템플릿/콜백의 특징

- 보통 단일 메서드 인터페이스를 사용한다. 특정 기능을 위해 한 번 호출되는 경우가 일반적이기 때문이다.
- 콜백 인터페이스의 메서드에는 보통 파라미터가 있다.
- 템플릿/콜백 패턴의 일반적인 작업 흐름은 다음과 같다.
    - 클라이언트는 템플릿에서 실행될 콜백 오브젝트를 만들고 넘긴다.
    - 템플릿은 정해진 작업 흐름을 진행하다 참조정보를 가지고 콜백 오브젝트의 메서드를 소환한다.
    - 콜백은 여러 참조정보를 이용해 작업을 수행하고 결과를 템플릿에 돌려준다.
    - 템플릿은 콜백이 돌려준 정보를 가지고 작업을 마저 수행한다.

### JdbcContext에 적용된 템플릿/콜백

- 템플릿과 클라이언트가 메서드 단위인 것이 특징이다.
- JdbcContext의 workWithStatementStrategy() 템플릿은 리턴 값이 없는 단순한 구조다.
- 흐름이 복잡하면 한 번 이상 콜백을 호출하기도 하고 여러 콜백을 클라이언트로부터 받아 사용하기도 한다.

---
[목록](./index.md)
