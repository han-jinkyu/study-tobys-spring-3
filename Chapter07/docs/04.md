# 4. 인터페이스 상속을 통한 안전한 기능확장

- 서버가 운영 중인 상태에서 서버를 재시작하지 않고 긴급하게 애플리케이션이 사용 중인 SQL을 변경해야 할 수도 있다.
- 지금까지 만든 `SqlService` 구현 클래스들은 초기에 리소스로부터 SQL 정보를 읽어오면 이를 메모리에 두고 그대로 사용한다.
- SQL 정보의 실시간 변경이라는 기능을 추가하기 위해 스프링답게 접근하는 방법이 무엇인지 살펴본다.

## 4.1 DI와 기능의 확장

- 지금까지 적용했던 DI는 특별한 기술이라기보다 일종의 디자인 패턴 또는 프로그래밍 모델이라는 관점에서 이해하는 것이 자연스럽다.
- DI의 가치를 제대로 얻으려면 먼저 DI에 적합한 오브젝트 설계가 필요하다.

### DI를 의식하는 설계

- 초기부터 `SqlService`의 내부 기능을 적절한 책임과 역할에 따라 분리하고, 인터페이스를 정의해 느슨하게 연결해주며, DI를 통해 유연하게 의존관계를 지정하도록 설계했기 때문에 그 뒤의 작업은 매우 쉬웠다.
- 유연하고 확장 가능한 좋은 오브젝트 설계와 DI 프로그래밍 모델은 서로 상승작용을 한다.
- DI를 배우며 사용하는 것은 크게 어렵지 않아 DI를 별것 아니라 생각할 수 있다. 하지만 DI의 가치를 제대로 누리기는 쉽지 않다.
- DI에 필요하고 유연하며 확장성이 뛰어난 오브젝트 설계를 하려면 많은 학습과 훈련이 필요하지만, 정말 추천할 한 가지는 **DI를 의식하면서 설계하는 방식**이다.
- DI는 런타임 시에 의존 오브젝트를 다이나믹하게 연결하여 유연한 확장을 꾀하는 게 목적이기 때문에 항상 확장을 염두에 두고 오브젝트 사이의 관계를 생각해야 한다.

### DI와 인터페이스 프로그래밍

- DI를 적용할 때는 **가능한 한 인터페이스를 사용**하게 해야 한다. 두 개의 오브젝트가 인터페이스를 통해 느슨하게 연결돼야 하기 때문이다.
- 인터페이스를 사용하는 이유는 다음과 같다.
    1. 다형성을 얻기 위해서다.
        - 의존 오브젝트가 가진 핵심 로직을 바꿔서 적용하는 것 외에도 프록시, 데코레이터, 어댑터, 테스트 대역 등 다양한 목적을 위해 활용된다.
    2. 인터페이스 분리 원칙을 통해 클라이언트와 의존 오브젝트 사이의 관계를 명확하게 할 수 있기 때문이다.
        - 오브젝트가 그 자체로 충분히 응집도가 높은 작은 단위로 설계됐더라도 목적과 관심이 각기 다른 클라이언트가 있다면 인터페이스를 통해 적절하게 분리해줄 필요가 있다. 
        - 이를 객체지향 설계 원칙에서는 `인터페이스 분리 원칙(Interface Segregation Principle)`이라 한다.

---
[Home](./index.md)
