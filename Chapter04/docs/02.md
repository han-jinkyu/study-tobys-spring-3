# 2. 예외 전환

- 예외 전환의 목적은 두 가지라고 볼 수 있다.
    1. 런타임 예외로 포장해서 굳이 필요하지 않은 try/catch를 줄이는 것.
    2. 로우레벨의 예외를 좀 더 의미 있고 추상화된 예외로 바꿔서 던지는 것.

## 2.1 JDBC의 한계

- JDBC는 자바를 이용해 DB에 접근하는 방법을 추상화된 API 형태로 정의해 놓았다.
- DB 종류에 상관 없이 표준화된 JDBC의 API에 익숙해지기만 하면 된다.
- 하지만 현실적으로 DB를 자유롭게 변경해서 사용할 수 있는 유연한 코드는 보장하지 못한다.

### 비표준 SQL

- 대부분 DB는 비표준 문법과 기능을 제공한다.
- 작성된 비표준 SQL은 DAO 코드에 적용되고 특정 DB에 종속하게 된다.
- 문제를 해결하려면, 표준 SQL만 사용하거나 DB별로 별로 DAO 작성 혹은 SQL을 외부로 독립하여야 한다.

### 호환성 없는 SQLException의 DB 에러정보

- DB마다 에러의 종류와 원인도 제각각이다.
- JDBC는 데이터 처리 중 발생하는 예외를 SQLException 하나로 전부 처리한다.
- `SQLException.getErrorCode()`로 가져올 수 있는 DB 에러 코드는 DB별로 다르다.
- SQLException은 예외가 발생했을 때의 DB 상태를 담은 SQL 상태정보를 부가적으로 `getSQLState()`를 제공한다.
- 이는 Open Group의 XOPEN SQL 스펙에 정의된 SQL 상태 코드를 따른다.
- 하지만 JDBC 드라이버에서 이 상태 코드를 정확하게 만들어주지 않는다.
- 따라서 상태 코드를 믿고 결과를 파악하는 것은 위험하다.

---
[목록](./index.md)
