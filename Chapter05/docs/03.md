# 3. 서비스 추상화와 단일 책임 원칙

### 수직, 수평 계층구조와 의존관계

- 기술과 서비스에 대한 추상화 기법을 이용하면 특정 기술환경에 종속되지 않는 코드를 만들 수 있다.
- `UserDao`와 `UserService`는 각각 담당하는 코드의 기능적 관심에 따라 분리되고, 서로 불필요한 영향을 주지 않으면서 독자적으로 확장이 가능하도록 만들었다.
- 트랜잭션의 추상화는 이와는 다르다. 애플리케이의 비즈니스 로직과 그 하위에서 동작하는 로우레벨의 트랜잭션 기술이라는 아예 다른 계층의 특성을 갖는 코드를 분리한 것이다.
- 서로 영향을 주지 않고 자유롭게 확장될 수 있는 구조를 만들 수 있는 데는 스프링의 DI가 중요한 역할을 하고 있다.

### 단일 책임 원칙

- 이런 적절한 분리가 가져오는 특징은 객체지향 설계의 원칙 중 하나인 `단일 책임 원칙(Single Responsibility Principle)`으로 설명할 수 있다.
    - 하나의 모듈은 한 가지 책임을 가져야 한다는 의미다.
- `UserService`에 JDBC Connection의 트랜잭션 코드가 있었을 때, 어떻게 사용자 레벨을 관리할 것인가와 어떻게 트랜잭션을 관리할 것인가의 두 가지 책임을 가지고 있었다.
    - 이는 변경의 이유가 두 가지라는 뜻이다.
- 하지만 트랜잭션 서비스의 추상화를 도입하고 DI를 이용하면서 변경될 이유가 하나가 되었다.

### 단일 책임 원칙의 장점

- 단일 책임 원칙을 잘 지키고 있다면, 어떤 변경이 필요할 때 수정 대상이 명확해진다.
- 적절하게 책임과 관심이 다른 코드를 분리하고, 서로 영향을 주지 않게 추상화 기법을 도입하고, 애플리케이션 로직과 기술/환경을 분리하는 등 작업이 필요한데 이를 위한 핵심적인 도구가 바로 스프링이 제공하는 DI다.

---
[목록](./index.md)
