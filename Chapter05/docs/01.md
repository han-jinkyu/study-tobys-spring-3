# 1. 사용자 레벨 관리 기능 추가

- UserDao에 다수의 회원이 가입할 수 있는 인터넷 서비스의 사용자 관리 모듈에 적용할 수 있게 간단한 비즈니스 로직을 추가한다.
    - 사용자 레벨은 BASIC, SILVER, GOLD
    - 처음 가입하면 BASIC이며, 활동에 따라 업그레이드
    - 가입 후 50회 이상 로그인하면 SILVER가 된다
    - SILVER에서 30번 이상 추천 받으면 GOLD가 된다
    - 사용자 레벨의 변경 작업은 일정한 주기를 가지고 일괄적으로 진행

## 1.1 필드 추가

### Level 이늄

- User 클래스에 사용자 레벨을 저장할 필드를 추가한다.
- DB에 각 레벨을 코드화하여 숫자로 넣기로 한다.

```java
public class User {
    private static final int BASIC = 1;
    private static final int SILVER = 2;
    private static final int GOLD = 3;

    // ...
    int level;

    // ...

    public int getLevel() {
        return level;
    }

    public void setLevel(int level) {
        this.level = level;
    }
}
``` 

- 문제는 `setLevel()`이 숫자 범위를 넘는 것을 넣어도 체크하지를 못한다.
- 따라서 `enum`을 사용하기로 한다.

```java
public enum Level {
    BASIC(1), SILVER(2), GOLD(3);

    private final int value;

    Level(int value) {
        this.value = value;
    }

    public int intValue() {
        return value;
    }

    public static Level valueOf(int value) {
        switch (value) {
            case 1: return BASIC;
            case 2: return SILVER;
            case 3: return GOLD;
            default: throw new AssertionError("Unknown value: " + value);
        }
    }
}
```

### User 필드 추가

```java
public class User {
    // ...
    Level level;
    int login;
    int recommend;

    // getter & setter
}
```

| 필드명      | 타입     | 설정       |
|:---------:|:-------:|:--------:|
| Level     | tinyint | Not Null |
| Login     | int     | Not Null |
| Recommend | int     | Not Null |

---
[목록](./index.md)
