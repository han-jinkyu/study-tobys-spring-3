# 2. 개발도구와 환경

## 2.1 JavaSE와 JavaEE

### JavaSE/JDK

- 스프링 3.0은 JavaSE 5 버전을 활용해 개발했기 때문에 JDK 5.0 이상을 필요로 한다.
- 스프링 3.0 이전엔 JDK 5.0 이상에서 사용할 수 있는 최적화된 기능을 별도 모듈로 제공했다.
- 하지만 이제는 JDK 5.0이 기본이 되어 스프링 모듈에서 그런 구분이 사라졌다.

### JavaEE/J2EE

- 스프링 3.0이 사용될 자바 엔터프라이즈 플랫폼으로는 J2EE 1.4 버전이나 JavaEE 5.0이 필요하다.
- J2EE 1.4 버전 서버를 사용할 때는 JDK 5.0에서 동작하는지 반드시 확인해야 한다.
- 만약 WAS가 JDK 5.0에서 사용할 수 없다면 스프링 3.0의 이용은 불가능하다.

## 2.2 IDE

- 스프링 애플리케이션은 아래를 지원하는 개발환경이면 개발이 가능하다.
    - 자바 5 또는 그 이상의 언어를 지원하는 자바 개발도구
    - 스키마를 지원하는 XML 편집기
- ANT나 Maven 같은 빌드 툴을 지원하고 톰캣이나 자바 서버로 바로 배포해서 실행해볼 수 있다면 제일 좋다.
- 요즘은 개발 과정에서 필요한 모든 일을 처리할 수 있도록 만들어진 **통합개발환경(IDE)**을 사용하는 추세다.
- 이클립스, 넷빈즈, IntelliJ IDEA 등이 대표적으로 꼽힌다.

## 2.3 SpringSource Tool Suite

- IDE로 이클립스를 선택했다면 `SpringSource Tool Suite(STS)`를 고려해 볼 수 있다.
- STS는 최신 이클립스를 기반으로 주요한 스프링 지원 플러그인과 관련 도구를 모아 최적화한 IDE다.

### SpringIDE 플러그인

SpringIDE는 스프링 개발에 유용한 긴으을 제공하는 플러그인 모음이다. 스프링 프로젝트와 설정파일 생성 마법사, 편리한 스프링 XML 설정파일 에디터, 빈의 의존관계 그래프, 네임스페이스 관리 등 도구를 제공한다.

1. 빈 클래스 이름 자동완성
    - `bean` 태그의 `class` 애트리뷰트를 입력할 때 자동완성을 지원한다.
    - 패키지 이름을 포함해 클래스 이름이 정확히 입력된다.
    - 빈의 프로퍼티를 등록할 때도 유용하다.
2. 빈 설정 오류검증 기능
    - 개발 중에 클래스나 프로퍼티 이름이 변경될 때 도움이 된다.
    - 이 기능을 활용하면 애플리케이션을 서버에 배치하고 구동하면서 오류를 검증할 필요가 없어진다.
3. 프로젝트 생성, 설정파일 생성, 빈 등록 위저드
    - 스프링 프로젝트를 생성할 때 스프링 프로젝트 위저드를 이용할 수 있다.
    - XML 설정파일 생성 위저드는 번거로운 스키마 선언부를 손쉽게 추가/수정할 수 있다.
4. 빈 의존관계 그래프
    - 스프링 IDE는 XML 설정파일을 읽어서 자동으로 그래프를 그려준다.
5. AOP 적용 대상 표시
    - 실수에 의해 적용 대상 빈을 놓치거나 필요 없는 빈에 적용하는 문제가 발생할 수 있다.
    - SpringIDE가 제공하는 XML 설정파일 편집기를 사용하면 쉽게 확인할 수 있다.
6. 기타 지원 기능
    - SpringIDE는 계속 발전하고 있다.

### STS 플러그인

- 스프링 애플리케이션의 서버 배치와 같은 추가 기능을 제공한다.
  - JavaEE 서버 배치
  - 스프링에 최적화한 tcServer
  - OSGi 플랫폼인 dmServer
  - 클라우드 서비스인 스프링소스 Cloud Foundry

### 기타 플러그인

1. M2Eclipse
    - Maven을 지원하는 이클립스 플러그인이다.
2. AJDT
    - `AspectJ Development Tool`의 약자로, AspectJ AOP를 이용한 개발을 지원하는 편리한 툴이다.
    - AspectJ 방식의 AOP를 사용할 경우 AspectJ와 관련된 편집 기능과 적용 대상 마커 등을 활용할 수 있다.
3. VMCI
    - `Virtual Machine Core Integration`의 약자이며, VMWare 서버 또는 워크스테이션과 연동하는 플러그인이다.
4. 이클립스 표준 플러그인
    - `WTP(Web Tool Platform)`
    - `EMP(Eclipse Modeling Project)`
    - `Mylyn`
    - `DSDP(Device Software Development Platform)` 등이 있다.

## 2.4 라이브러리 관리와 빌드 툴

- 이제 애플리케이션 프로젝트를 IDE에 구성할 차례다.
- 가장 어려운 부분은 **필요한 프레임워크 모듈과 라이브러리 파일을 선택해서 프로젝트의 빌드 패스에 넣어주는 일**이다.

### 라이브러리 관리의 어려움

- 스프링으로 만드는 프로젝트에 포함될 가능성이 많은 라이브러리의 종류가 굉장히 많다.
- 하지만 그 모든 모듈과 라이브러리가 매번 다 사용되는 것은 아니다. 적절한 선택이 필요하다.
- 또한 라이브러리마다 버전이 다수 존재한다.
- 필요한 라이브러리 조합을 만드는 과정에서 같은 라이브러리의 다른 버전을 동시에 사용하는 경우 문제가 발생한다.
- 자바는 모듈이라는 개념이 없다. 자바의 jar는 압축 패키징 방법이며 구분 가능한 독립 모듈이 아니다.
- 같은 라이브러리의 두 가지 버전에 의존하는 경우, 구현이 다름으로 인해 문제가 발생한다.
- 이 문제를 풀 수 있는 가장 간단한 방법은 **재패키징(repacking)**이다.
    - 한쪽 버전의 클래스를 다른 패키지로 옮겨서 서로 구별되는 클래스로 만들어주는 방법이다.
    - 이에 의존하는 라이브러리에 있는 코드도 전부 수정해야 한다.
- 이런 재패키징 작업은 모든 소스나 바이트코드를 일일이 찾아서 수정해야 하므로 만만치 않다.
- ASM이라는 라이브러리는 워낙 많은 곳에서 사용되어 문제가 많은데, 스프링도 리패키징하여 스프링 패키지 밑으로 옮겨두고 사용한다.

### 라이브러리 선정

가장 먼저 해야 할 작업은 스프링으로 만들 애플리케이션에서 정확히 어떤 기능이 필요한지 정리하는 것이다.

1. 스프링 모듈
    - 사용할 기능과 기술 목록이 정해졌으면 일단 스프링 모듈을 선정한다.
    - 스프링 모듈 사이에도 의존관계가 있다.
2. 라이브러리
    - 스프링의 각 모듈은 오픈소스 라이브러리 또는 표준 API, 상용 제품 라이브러리에도 의존한다.

### 빌드 툴과 라이브러리 관리

- Maven과 ANT는 자바의 대표적인 빌드 툴이다.
- IDE는 코드만 작성하면 자동으로 컴파일해주는 자동빌드 기능이 있고, 관련 빌더를 추가하여 복잡한 빌드 작업도 간단히 진행할 수 있다.
- 하지만 IDE를 사용할 수 없는 환경에서도 **일관된 빌드가 가능하도록 하는 것**이 중요하다.
- 따라서 IDE를 기본적으로 이용하면서 독립적인 빌드 툴을 함께 사용하는 것이 바람직하다.
- ANT가 이클립스에 내장되어 사실상 표준 자바 빌드 툴로 자리잡을 때 Maven이 등장했다.
- Maven은 단순 빌드 툴을 넘어서 개발 과정에서 필요한 빌드, 테스트, 배치, 문서화 등을 지원한다.
- Maven은 POM이라는 프로젝트 모델 정보를 이용한다.
    - 절차적인 스크립트와 구조가 비슷한 ANT와 달리 선언적이다.
    - 프로젝트의 주요한 구조와 특징, 필요 정보를 POM의 프로젝트 모델 정보로 만들면, 이를 참조해 빌드 또는 프로젝트 관리 작업을 진행할 수 있다.
- Maven의 또 다른 특징은 의존 라이브러리를 선언하면 원격 서버에서 이를 자동으로 다운 받는다.
    - 다운 받을 때 지정된 라이브러리가 필요로 하는 다른 라이브러리도 재귀적으로 함께 받는다.
    - 이 기능을 **전이적(transitive) 의존 라이브러리 추적 기능**이라 한다.
- Maven의 이런 기능은 라이브러리를 프로젝트 안에 포함하여 관리하지 않아도 되게 해준다.
- 스프링의 모든 모듈은 POM 정보를 가지고 있어, 모듈을 사용하는 데 필요한 라이브러리의 종류와 버전을 알 수 있다.
- Maven은 라이브러리의 효과적 관리 측면에서 필요하다.
    - 조직이나 팀이 관여하는 프로젝트에 공통적으로 사용하는 기술 목록을 만들어 관리하면 좋다.
    - 필요한 스프링 모듈과 라이브러리를 선정하고 목록을 만들어 POM 파일을 만든 뒤, 사내 로컬 Maven 리포지터리를 설정하고 POM 파일을 업로드하는 식이다.

### 스프링 모듈의 두 가지 이름과 리포지토리

- 스프링 모듈의 jar 파일 이름을 인터넷에 검색해보면 두 가지 종류를 발견할 수 있다.
- 예를 들어 `core` 모듈이라면...
    - `spring-core-3.0.7.RELEASE.jar`
    - `org.springframework.core-3.0.7.RELEASE.jar`
- 이 두 파일은 사실 동일한 파일이며, 배포되는 기술에 따라 관례적으로 다른 이름을 사용하는 것이다.
- `spring-core-3.0.7.RELEASE.jar`는 Maven에서 사용하는 명명 규칙을 따른 것이다.
    - Maven은 그룹 아이디, 아티팩트 아이디, 버전 세 가지로 라이브러리를 정의한다.
    - 그 중 아이팩트 아이디와 버전을 조합해서 파일 이름으로 사용한다.
- `org.springframework.core-3.0.7.RELEASE.jar`는 OSGi의 모듈 명명 규칙을 따른 것이다.
    - 스프링의 모든 모듈은 OSGi 호환 모듈로 만들어졌다.
    - OSGi 호환 이름을 갖는 스프링 모듈을 사용하려면 스프링소스가 제공하는 엔터프라이즈 번들 리포지토리를 사용해야 한다.

---
[Home](./index.md)
